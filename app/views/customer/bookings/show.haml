- address = @booking.address
- source = @booking.payments.first.try(:source)
- service = @booking.service

- content_for :sidebar do
  = render 'shared/sidebar'

.panel.panel-default
  .panel-heading
    = link_to fa_icon('angle-double-left', text: t('common.back')), :back
  .panel-body
    %h3 #{t('common.booking')} #{@booking.token}
    .row
      .col-sm-6
        %h4= t('common.address')
        %address
          = address.full_name
          %br
          = address.full_address
          %br
          = address.state_text
          %br
          = address.country.name
          %br
          = address.zipcode
      .col-sm-6
        %h4= t('.payment_infomation')
        %p
          = image_tag "cards/#{source.cc_type.downcase.gsub(/\s+/, '_')}.png", width: 32, alt: source.cc_type
          %span= t('common.ending_with', digits: source.last_digits)
    .row
      .col-sm-6
        %h4= t('common.service')
        = render 'shared/service_image', service: @booking.service
      .col-sm-6
        %h4 &nbsp;
        %p
          %b= t('activerecord.attributes.booking.event_type')
          = @booking.event_type
          %br
          %b= t('activerecord.attributes.booking.venue_type')
          = @booking.venue_type
          %br
          %b= t('activerecord.attributes.booking.number_of_guests')
          = @booking.number_of_guests
          %br
          %b= t('activerecord.attributes.booking.start_at')
          = datetime_format local_time(@booking.start_at)
          %br
          %b= t('activerecord.attributes.booking.end_at')
          = datetime_format local_time(@booking.end_at)
          %br
          %b #{t('activerecord.attributes.booking.entry_instructions')}:
          %br
          = @booking.entry_instructions
          %br
          %b #{t('activerecord.attributes.booking.parking_instructions')}:
          %br
          = @booking.parking_instructions
          %br
          %b #{t('activerecord.attributes.booking.special_info')}:
          %br
          = @booking.special_info

    .row
      .col-sm-12
        - if mobile?
          %p
            %b= t('activerecord.attributes.booking.price')
            = number_to_currency @booking.service.booking_price
            %br
            %b= t('activerecord.attributes.booking.hours')
            = @booking.hours
            %br
            %b= t('common.total')
            = number_to_currency @booking.total
            %br
            %b= t('common.state')
            = t("activerecord.attributes.booking.states.#{@booking.state}")
            %br
            %b= t('common.payment_state')
            - if @booking.payment_state
              = t("activerecord.attributes.booking.states.#{@booking.payment_state}")

        - else
          %table.table.table-striped
            %thead
              %th= t('activerecord.attributes.booking.price')
              %th= t('activerecord.attributes.booking.hours')
              %th= t('common.state')
              %th= t('common.payment_state')
            %tbody
              %tr
                %td= number_to_currency @booking.service.booking_price
                %td= @booking.hours
                %td
                  %span.label.label-info= t("activerecord.attributes.booking.states.#{@booking.state}")
                %td
                  - if @booking.payment_state
                    %span.label.label-success= t("activerecord.attributes.booking.states.#{@booking.payment_state}")
              %tr
                %td.text-right(colspan='3')
                  %b= t('common.total')
                %td= number_to_currency @booking.total
